<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Arbuz WMS Training</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">
    
    <style>
        /* --- –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò --- */
        :root {
            --arbuz-green: #00A046;
            --arbuz-red: #E21E2C;
            --dark-ui: #212121;
            --screen-bg: #F5F5F5;
        }

        body {
            margin: 0; padding: 0; background-color: var(--dark-ui);
            font-family: 'Inter', sans-serif; height: 100vh;
            display: flex; justify-content: center; overflow: hidden;
            user-select: none;
        }

        .device-screen {
            background: var(--screen-bg); width: 100%; height: 100%;
            max-width: 480px; display: flex; flex-direction: column; position: relative;
        }

        /* –°—Ç–∞—Ç—É—Å –±–∞—Ä */
        .status-bar {
            background: var(--arbuz-green); color: white; padding: 8px 16px;
            font-size: 13px; display: flex; justify-content: space-between; align-items: center; font-family: 'Roboto', sans-serif;
        }

        /* –ö–æ–Ω—Ç–µ–Ω—Ç */
        .content { flex: 1; padding: 20px; display: flex; flex-direction: column; overflow-y: auto; }
        .screen { display: none; flex-direction: column; min-height: 100%; }
        .screen.active { display: flex; animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* –¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞ –∏ –∫–∞—Ä—Ç–æ—á–∫–∏ */
        h1 { margin: 0 0 10px 0; font-size: 24px; font-weight: 800; color: #222; text-align: center; }
        p { color: #555; font-size: 16px; line-height: 1.5; margin-bottom: 24px; text-align: center; }

        .card { background: white; border-radius: 16px; padding: 16px; margin-bottom: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.06); }
        .card-row { display: flex; align-items: center; margin-bottom: 12px; }
        .card-icon { font-size: 28px; width: 40px; text-align: center; margin-right: 12px; }
        
        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            background: var(--arbuz-green); color: white; border: none; padding: 16px;
            font-size: 18px; font-weight: 700; border-radius: 12px; width: 100%;
            cursor: pointer; box-shadow: 0 4px 10px rgba(0,160,70,0.3); margin-top: 20px;
        }
        .btn:active { transform: scale(0.98); }

        .addr-badge { color: white; padding: 4px 8px; border-radius: 6px; font-family: monospace; font-weight: bold; margin-right: 12px; min-width: 32px; text-align: center; }
        .target-box { background: #E8F5E9; border: 2px dashed var(--arbuz-green); border-radius: 16px; padding: 20px; text-align: center; margin-bottom: 20px; }
        .target-val { font-size: 32px; font-weight: 800; color: #333; font-family: monospace; }
        
        .scan-input { width: 100%; padding: 15px; font-size: 18px; border: 2px solid #ddd; border-radius: 10px; box-sizing: border-box; font-family: monospace; outline: none; text-align: center; }
        .scan-input:focus { border-color: var(--arbuz-green); background: #fff; }
        .scan-status { font-size: 13px; color: #888; margin-top: 8px; text-align: center; }

        /* --- üî• –°–¢–ò–õ–ò –°–ë–û–†–ö–ò (–ü–û–í–¢–û–†–Ø–ï–ú –°–ö–†–ò–ù–®–û–¢) --- */
        .wms-header {
            display: flex; justify-content: space-between; background: white; padding: 15px 10px;
            border-bottom: 1px solid #eee; margin: -20px -20px 15px -20px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.03);
        }
        .wms-addr-block { text-align: center; flex: 1; }
        .wms-addr-val { font-size: 26px; font-weight: 700; color: #222; display: block; font-family: 'Roboto', sans-serif; line-height: 1; margin-bottom: 4px;}
        .wms-addr-lbl { font-size: 11px; color: #999; text-transform: lowercase; }

        .wms-product-card {
            background: white; border-radius: 8px; padding: 12px; display: flex; gap: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 20px; border: 1px solid #eee;
        }
        .prod-info { flex: 1; display: flex; flex-direction: column; gap: 4px; }
        .prod-title { font-weight: 700; font-size: 15px; color: #222; line-height: 1.3; }
        .prod-meta { font-size: 12px; color: #777; }
        .prod-station { font-size: 12px; color: #333; font-weight: 600; margin-top: 4px; }
        
        .prod-img-box { width: 90px; height: 90px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; }
        .prod-img { width: 100%; height: 100%; object-fit: contain; }

        .counters-row { display: flex; gap: 15px; margin-bottom: 25px; align-items: flex-end; }
        .qty-box { flex: 1; text-align: center; border-radius: 8px; padding: 10px; position: relative; height: 70px; display: flex; align-items: center; justify-content: center; }
        .qty-label { position: absolute; top: -20px; left: 0; width: 100%; font-size: 12px; color: #777; text-align: center; }
        
        .qty-red { background: var(--arbuz-red); color: white; box-shadow: 0 4px 12px rgba(226, 30, 44, 0.25); }
        .qty-val { font-size: 38px; font-weight: 700; }
        .qty-white { background: white; border: 2px solid var(--arbuz-green); color: var(--arbuz-green); box-sizing: border-box; }

        .bottom-actions { 
            display: flex; justify-content: space-between; margin-top: auto; 
            padding-top: 15px; padding-bottom: 10px;
        }
        .action-item { display: flex; flex-direction: column; align-items: center; gap: 8px; width: 70px; cursor: pointer;}
        .circle-btn {
            width: 56px; height: 56px; border-radius: 50%; border: none;
            display: flex; align-items: center; justify-content: center;
            font-size: 24px; transition: transform 0.1s;
        }
        .circle-btn:active { transform: scale(0.95); }
        .btn-gray { background: #E0E0E0; color: #666; }
        .btn-check { background: #E0E0E0; color: #999; }
        .btn-check.ready { background: var(--arbuz-green); color: white; box-shadow: 0 4px 10px rgba(0,160,70,0.3); }
        .act-label { font-size: 11px; color: #999; text-align: center; line-height: 1.2;}

        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 90; display: none; }
        .bottom-sheet { position: fixed; bottom: -100%; left: 0; width: 100%; background: white; border-top-left-radius: 20px; border-top-right-radius: 20px; padding: 24px; box-sizing: border-box; transition: bottom 0.3s; z-index: 100; }
        .bottom-sheet.active { bottom: 0; }
        .hint-btn { color: #1976D2; font-weight: 600; cursor: pointer; text-align: center; padding: 10px; display: block;}
        .dev-btn { position: absolute; bottom: 5px; right: 5px; opacity: 0.1; font-size: 10px; }
    </style>
</head>
<body>

    <div class="device-screen">
        <div class="status-bar">
            <span>Arbuz WMS</span>
            <span id="clock">10:00</span>
        </div>

        <div class="content" id="main-content">
            </div>
    </div>

    <div class="overlay" id="overlay" onclick="closeHint()"></div>
    <div class="bottom-sheet" id="hint-sheet">
        <h3 style="margin-top:0; text-align:center;" id="hint-title">–ü–æ–¥—Å–∫–∞–∑–∫–∞</h3>
        <div id="hint-text" style="line-height: 1.6; color: #444;"></div>
        <button class="btn" style="padding: 12px;" onclick="closeHint()">–ü–æ–Ω—è—Ç–Ω–æ</button>
    </div>

    <script>
        // --- –î–ê–ù–ù–´–ï ---
        const tasks = {
            1: { target: "B1-02-05-A-01", hint: "<p><b>B1</b> ‚Äî –ë–∞–∫–∞–ª–µ—è.</p><p><b>02</b> ‚Äî –†—è–¥ 2.</p><p><b>05</b> ‚Äî –°—Ç–µ–ª–ª–∞–∂ 5.</p><p><b>A</b> ‚Äî –ù–∏–∂–Ω—è—è –ø–æ–ª–∫–∞.</p>" },
            2: { target: "G1-02-03-D-02", hint: "<p><b>G</b> ‚Äî –ì–ú–ó (–ì–∞—Å—Ç—Ä–æ–Ω–æ–º).</p><p>‚ùÑÔ∏è <b>–í–ù–ò–ú–ê–ù–ò–ï:</b> –¢—É—Ç —Ö–æ–ª–æ–¥–Ω–æ!</p><p>–ù–∞–¥–µ–Ω—å –∫—É—Ä—Ç–∫—É –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –∏–¥—Ç–∏ –≤ —ç—Ç–æ—Ç —Ä—è–¥.</p>" },
            3: { 
                target: "B1-01-01-B-02", 
                // –†–ï–ê–õ–¨–ù–´–ô –®–¢–†–ò–•–ö–û–î
                productBarcode: "3083680048774", 
                productName: "–ì–æ—Ä–æ—à–µ–∫ Bonduelle –∫–æ–Ω—Å–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, 425 –º–ª",
                imgUrl: "https://bonduelle.ru/upload/iblock/d76/d7645063714b2d3550e5670868516d7a.png" 
            }
        };

        // --- –®–ê–ë–õ–û–ù–´ –≠–ö–†–ê–ù–û–í ---
        const screens = {
            // 1. WELCOME
            welcome: `
                <div class="screen active" style="text-align: center; margin-top: 30px;">
                    <div style="font-size: 60px; margin-bottom: 10px;">üçâ</div>
                    <h1>–ü—Ä–∏–≤–µ—Ç, —Å—Ç–∞–∂—ë—Ä!</h1>
                    <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–æ–º–∞–Ω–¥—É.<br>–ù–∞—É—á–∏–º—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ —Å–∫–∞–Ω–µ—Ä–æ–º –∏ —Å–æ–±–∏—Ä–∞—Ç—å –∑–∞–∫–∞–∑—ã.</p>
                    <button class="btn" onclick="renderScreen('zones')">–ù–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ üöÄ</button>
                </div>
            `,
            // 2. ZONES
            zones: `
                <div class="screen active">
                    <h1>–†–µ–≥–∏–æ–Ω—ã —Å–∫–ª–∞–¥–∞</h1>
                    <p>5 –≥–ª–∞–≤–Ω—ã—Ö –æ—Ç–¥–µ–ª–æ–≤ —Ö—Ä–∞–Ω–µ–Ω–∏—è:</p>
                    <div class="card"><div class="card-row"><div class="card-icon">üçù</div><div><b>B ‚Äî –ë–∞–∫–∞–ª–µ—è (Food)</b><br><span style="font-size:12px; color:#777;">–ö—Ä—É–ø—ã, –∫–æ–Ω—Å–µ—Ä–≤—ã</span></div></div></div>
                    <div class="card"><div class="card-row"><div class="card-icon">üß¥</div><div><b>M ‚Äî –•–∏–º–∏—è (Non Food)</b><br><span style="font-size:12px; color:#777;">–ë—ã—Ç–æ–≤–∞—è —Ö–∏–º–∏—è</span></div></div></div>
                    <div class="card"><div class="card-row"><div class="card-icon">üçâ</div><div><b>F ‚Äî –§—Ä–µ—à</b><br><span style="font-size:12px; color:#777;">–°–≤–µ–∂–∏–µ —Ñ—Ä—É–∫—Ç—ã</span></div></div></div>
                    <div class="card"><div class="card-row"><div class="card-icon">üç¶</div><div><b>G ‚Äî –ì–ú–ó</b><br><span style="font-size:12px; color:#777;">–ú–æ–ª–æ—á–∫–∞, –∑–∞–º–æ—Ä–æ–∑–∫–∞</span></div></div></div>
                    <div class="card"><div class="card-row"><div class="card-icon">üíä</div><div><b>PH ‚Äî –ê–ø—Ç–µ–∫–∞</b><br><span style="font-size:12px; color:#777;">–õ–µ–∫–∞—Ä—Å—Ç–≤–∞</span></div></div></div>
                    <button class="btn" onclick="renderScreen('address')">–í—Å—ë –ø–æ–Ω—è—Ç–Ω–æ üëâ</button>
                </div>
            `,
            // 3. ADDRESS
            address: `
                <div class="screen active">
                    <h1>–ê–¥—Ä–µ—Å —è—á–µ–π–∫–∏</h1>
                    <p>–ü—Ä–∏–Ω—Ü–∏–ø "–ì–æ—Ä–æ–¥–∞":</p>
                    <div class="target-box" style="padding:10px;"><span style="font-family:monospace; font-weight:bold; font-size:20px;">B1-02-05-A-01</span></div>
                    <div class="card">
                        <div class="card-row"><span class="addr-badge" style="background:#FF5722;">B1</span><div><b>–ì–æ—Ä–æ–¥</b> (–û—Ç–¥–µ–ª)</div></div>
                        <div class="card-row"><span class="addr-badge" style="background:#2196F3;">02</span><div><b>–£–ª–∏—Ü–∞</b> (–†—è–¥)</div></div>
                        <div class="card-row"><span class="addr-badge" style="background:#9C27B0;">05</span><div><b>–î–æ–º</b> (–°—Ç–µ–ª–ª–∞–∂)</div></div>
                        <div class="card-row"><span class="addr-badge" style="background:#E91E63;">A</span><div><b>–≠—Ç–∞–∂</b> (–ü–æ–ª–∫–∞)</div></div>
                        <div class="card-row"><span class="addr-badge" style="background:var(--arbuz-green);">01</span><div><b>–ö–≤–∞—Ä—Ç–∏—Ä–∞</b> (–ü–æ–∑–∏—Ü–∏—è)</div></div>
                    </div>
                    <button class="btn" onclick="startTask(1)">–ó–∞–ø–æ–º–Ω–∏–ª, –∫ –ø—Ä–∞–∫—Ç–∏–∫–µ! üî•</button>
                </div>
            `,
            // 4. TASK 1 (B)
            task1: `
                <div class="screen active">
                    <h1>–ó–∞–¥–∞–Ω–∏–µ ‚Ññ1</h1>
                    <p>–ù–∞–π–¥–∏ –∞–¥—Ä–µ—Å –∏ —Å–∫–∞–Ω–∏—Ä—É–π:</p>
                    <div class="target-box">
                        <div style="font-size:12px; color:#E65100; font-weight:bold; margin-bottom:5px;">–¶–ï–õ–¨</div>
                        <div class="target-val">${tasks[1].target}</div>
                    </div>
                    <div class="hint-btn" onclick="showHint(1)">ü§î –ü–æ–¥—Å–∫–∞–∑–∫–∞</div>
                    <div style="margin-top:10px;">
                        <input type="text" id="barcode-input" class="scan-input" placeholder="–°–∫–∞–Ω–∏—Ä—É–π..." autocomplete="off">
                        <div class="scan-status">–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</div>
                    </div>
                    <button class="dev-btn" onclick="simulateScan('${tasks[1].target}')">[DEV: OK]</button>
                </div>
            `,
            // 5. TASK 2 (G - Cold)
            task2: `
                <div class="screen active">
                    <h1>–ó–∞–¥–∞–Ω–∏–µ ‚Ññ2</h1>
                    <p>–°–ª–µ–¥—É—é—â–∞—è —è—á–µ–π–∫–∞:</p>
                    <div class="target-box" style="border-color:#2196F3; background:#E3F2FD;">
                        <div style="font-size:12px; color:#1565C0; font-weight:bold; margin-bottom:5px;">–¶–ï–õ–¨</div>
                        <div class="target-val">${tasks[2].target}</div>
                    </div>
                    <div class="hint-btn" onclick="showHint(2)">‚ùÑÔ∏è –ö—É–¥–∞ –∏–¥—Ç–∏?</div>
                    <div style="margin-top:10px;">
                        <input type="text" id="barcode-input" class="scan-input" placeholder="–°–∫–∞–Ω–∏—Ä—É–π..." autocomplete="off">
                        <div class="scan-status">–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è</div>
                    </div>
                    <button class="dev-btn" onclick="simulateScan('${tasks[2].target}')">[DEV: OK]</button>
                </div>
            `,
            // 6. ONBOARDING SUCCESS
            onboarding_complete: `
                <div class="screen active" style="text-align: center; justify-content:center; height:100%;">
                    <div style="font-size: 70px; margin-bottom: 20px;">üéì</div>
                    <h1 style="color: var(--arbuz-green);">–ü–µ—Ä–≤—ã–π —ç—Ç–∞–ø –ø—Ä–æ–π–¥–µ–Ω!</h1>
                    <p>–¢—ã –∏–∑—É—á–∏–ª –∑–æ–Ω—ã –∏ –Ω–∞—É—á–∏–ª—Å—è –Ω–∞—Ö–æ–¥–∏—Ç—å —è—á–µ–π–∫–∏.</p>
                    <div class="card" style="margin-top:20px; background:#E8F5E9;">
                        <p style="margin:0; color:#2e7d32;"><b>–ü—Ä–µ–¥—Å—Ç–∞–≤—å:</b><br>–¢—ã –ø–æ–ª—É—á–∏–ª –ø–µ—Ä–≤—ã–π —Ä–µ–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑ –Ω–∞ —Å–±–æ—Ä–∫—É.</p>
                    </div>
                    <button class="btn" style="background:#00A046; color:white; margin-top:30px;" onclick="renderScreen('real_order')">–ù–∞—á–∞—Ç—å –æ—Ç–±–æ—Ä üì¶</button>
                </div>
            `,
            // 7. REAL ORDER (UI –°–ö–†–ò–ù–®–û–¢–ê)
            real_order: `
                <div class="screen active" style="padding:0;">
                    <div class="wms-header">
                        <div class="wms-addr-block"><span class="wms-addr-val">B1</span><span class="wms-addr-lbl">—Å–µ–∫—Ü–∏—è</span></div>
                        <div class="wms-addr-block"><span class="wms-addr-val">01</span><span class="wms-addr-lbl">—Ä—è–¥</span></div>
                        <div class="wms-addr-block"><span class="wms-addr-val">01</span><span class="wms-addr-lbl">—Å—Ç–µ–ª–ª–∞–∂</span></div>
                        <div class="wms-addr-block"><span class="wms-addr-val">B</span><span class="wms-addr-lbl">–ø–æ–ª–∫–∞</span></div>
                        <div class="wms-addr-block"><span class="wms-addr-val">02</span><span class="wms-addr-lbl">—è—á–µ–π–∫–∞</span></div>
                    </div>

                    <div style="padding: 0 15px;">
                        <div style="font-size:12px; color:#777; margin-bottom:5px;">–û—Å—Ç–∞—Ç–æ–∫: 17</div>
                        
                        <div class="wms-product-card">
                            <div class="prod-info">
                                <div class="prod-title">${tasks[3].productName}</div>
                                <div class="prod-meta">–®—Ç—Ä–∏—Ö–∫–æ–¥—ã: ${tasks[3].productBarcode}</div>
                                <div class="prod-meta">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: "8701531..."</div>
                                <div class="prod-station">–°—Ç–∞–Ω—Ü–∏—è: –°—Ç–∞–Ω—Ü–∏—è 10</div>
                            </div>
                            <div class="prod-img-box">
                                <img src="${tasks[3].imgUrl}" class="prod-img" alt="–ì–æ—Ä–æ—à–µ–∫">
                            </div>
                        </div>

                        <div style="display:flex; gap:8px; margin-bottom:20px;">
                            <input type="text" id="barcode-input" class="scan-input" style="text-align:left; font-size:16px;" placeholder="–û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ —à—Ç—Ä–∏—Ö–∫–æ–¥">
                            <button style="background:white; border:1px solid #ddd; border-radius:8px; width:50px; font-size:20px; color:#666;">‚Üí</button>
                        </div>

                        <div class="counters-row">
                            <div class="qty-box qty-red">
                                <span class="qty-label">–û—Ç–æ–±—Ä–∞–Ω–æ, —à—Ç</span>
                                <span class="qty-val" id="picked-val">0</span>
                            </div>
                            <div style="padding-bottom:25px; color:#777;">–∏–∑</div>
                            <div class="qty-box qty-white">
                                <span class="qty-label">–ó–∞–∫–∞–∑–∞–Ω–æ, —à—Ç</span>
                                <span class="qty-val">1</span>
                            </div>
                        </div>
                    </div>

                    <div class="bottom-actions" style="padding: 10px 20px;">
                        <div class="action-item" onclick="alert('–≠—Ç–æ –∫–Ω–æ–ø–∫–∞ –ù–∞–∑–∞–¥')">
                            <button class="circle-btn btn-gray">‚Üê</button>
                            <span class="act-label">–ù–∞–∑–∞–¥</span>
                        </div>
                        <div class="action-item" onclick="showReplaceHint()">
                            <button class="circle-btn btn-gray">‚Üª</button>
                            <span class="act-label">–ó–∞–º–µ–Ω–∏—Ç—å</span>
                        </div>
                        <div class="action-item" onclick="finishRealOrder()">
                            <button class="circle-btn btn-check" id="btn-confirm">‚úì</button>
                            <span class="act-label">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</span>
                        </div>
                        <div class="action-item" onclick="showNotFoundHint()">
                            <button class="circle-btn btn-gray">‚úï</button>
                            <span class="act-label">–ù–µ –Ω–∞–π–¥–µ–Ω</span>
                        </div>
                    </div>
                    <button class="dev-btn" onclick="simulateScan('${tasks[3].productBarcode}')">[DEV: Scan Product]</button>
                </div>
            `,
            // 8. FINAL SUCCESS
            final_success: `
                <div class="screen active" style="text-align: center; justify-content:center; height:100%;">
                    <div style="font-size: 70px; margin-bottom: 20px;">‚úÖ</div>
                    <h1 style="color: var(--arbuz-green);">–ó–∞–∫–∞–∑ —Å–æ–±—Ä–∞–Ω!</h1>
                    <p>–¢—ã —É—Å–ø–µ—à–Ω–æ –æ—Ç–æ–±—Ä–∞–ª –≥–æ—Ä–æ—à–µ–∫.<br>–¢–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞—à WMS.</p>
                    <button class="btn" onclick="location.reload()">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ üîÑ</button>
                </div>
            `
        };

        // --- –õ–û–ì–ò–ö–ê ---
        let currentScreen = '';

        function renderScreen(name) {
            currentScreen = name;
            document.getElementById('main-content').innerHTML = screens[name];
            const input = document.getElementById('barcode-input');
            if (input) {
                setTimeout(() => input.focus(), 500);
                input.addEventListener('keydown', handleEnter);
            }
        }

        function startTask(n) { renderScreen('task' + n); }
        
        // –í—Å–ø–ª—ã–≤–∞—é—â–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏
        function showHint(n) {
            document.getElementById('hint-title').innerText = n === 2 ? "–í–Ω–∏–º–∞–Ω–∏–µ!" : "–ü–æ–¥—Å–∫–∞–∑–∫–∞";
            document.getElementById('hint-text').innerHTML = tasks[n].hint;
            openOverlay();
        }

        function showReplaceHint() {
            document.getElementById('hint-title').innerText = "–ö–Ω–æ–ø–∫–∞ ¬´–ó–∞–º–µ–Ω–∏—Ç—å¬ª";
            document.getElementById('hint-text').innerHTML = 
                "–ï—Å–ª–∏ —Ç—ã –ø—Ä–∏—à–µ–ª –∫ –Ω—É–∂–Ω–æ–π —è—á–µ–π–∫–µ, –∞ —Ç–æ–≤–∞—Ä–∞ –Ω–µ—Ç, –∏ —ç—Ç–∞ –∫–Ω–æ–ø–∫–∞ <b>–∞–∫—Ç–∏–≤–Ω–∞</b> ‚Äî —Ç—ã –¥–æ–ª–∂–µ–Ω —Å–¥–µ–ª–∞—Ç—å –∑–∞–º–µ–Ω—É —Ç–æ–≤–∞—Ä–∞ –Ω–∞ –ø–æ—Ö–æ–∂–∏–π –∏ —Å–æ–æ–±—â–∏—Ç—å –æ–± —ç—Ç–æ–º —Å—É–ø–µ—Ä–≤–∞–π–∑–µ—Ä—É.";
            openOverlay();
        }

        function showNotFoundHint() {
            document.getElementById('hint-title').innerText = "–ö–Ω–æ–ø–∫–∞ ¬´–ù–µ –Ω–∞–π–¥–µ–Ω¬ª";
            document.getElementById('hint-text').innerHTML = 
                "–ï—Å–ª–∏ —Ç–æ–≤–∞—Ä–∞ –Ω–µ—Ç, –∞ –∫–Ω–æ–ø–∫–∞ ¬´–ó–∞–º–µ–Ω–∏—Ç—å¬ª <b>–ù–ï –∞–∫—Ç–∏–≤–Ω–∞</b> ‚Äî –∑–Ω–∞—á–∏—Ç –∫–ª–∏–µ–Ω—Ç –Ω–µ —Ö–æ—á–µ—Ç –∑–∞–º–µ–Ω—É. –ù–∞–∂–º–∏ ¬´–ù–µ –Ω–∞–π–¥–µ–Ω¬ª –∏ —Å–æ–±–∏—Ä–∞–π –¥–∞–ª—å—à–µ.";
            openOverlay();
        }

        function openOverlay() {
            document.getElementById('overlay').style.display = 'block';
            setTimeout(() => document.getElementById('hint-sheet').classList.add('active'), 10);
        }

        function closeHint() {
            document.getElementById('hint-sheet').classList.remove('active');
            setTimeout(() => document.getElementById('overlay').style.display = 'none', 300);
            const input = document.getElementById('barcode-input');
            if(input) input.focus();
        }

        function handleEnter(e) {
            if (e.key === 'Enter' || e.keyCode === 13) checkScan(e.target.value);
        }

        function checkScan(code) {
            code = code.trim();
            const input = document.getElementById('barcode-input');

            if (currentScreen === 'task1') {
                if (code === tasks[1].target) { alert("–í–µ—Ä–Ω–æ!"); startTask(2); } 
                else { alert("–û—à–∏–±–∫–∞! –ò—â–µ–º: " + tasks[1].target); input.value=""; }
            } 
            else if (currentScreen === 'task2') {
                if (code === tasks[2].target) { renderScreen('onboarding_complete'); }
                else { alert("–û—à–∏–±–∫–∞! –ò—â–µ–º: " + tasks[2].target); input.value=""; }
            }
            else if (currentScreen === 'real_order') {
                if (code === tasks[3].productBarcode) {
                    document.getElementById('picked-val').innerText = "1";
                    const btn = document.getElementById('btn-confirm');
                    btn.classList.add('ready');
                    btn.classList.remove('btn-check');
                    input.blur();
                    input.style.background = "#E8F5E9";
                    input.value = "OK: " + code;
                } else {
                    alert("–ù–µ —Ç–æ—Ç —Ç–æ–≤–∞—Ä! –®—Ç—Ä–∏—Ö–∫–æ–¥: " + tasks[3].productBarcode);
                    input.value="";
                }
            }
        }

        function finishRealOrder() {
            if (document.getElementById('picked-val').innerText === "1") {
                renderScreen('final_success');
            } else {
                alert("–°–Ω–∞—á–∞–ª–∞ –æ—Ç—Å–∫–∞–Ω–∏—Ä—É–π —Ç–æ–≤–∞—Ä!");
            }
        }

        function simulateScan(code) {
            const input = document.getElementById('barcode-input');
            if(input) { input.value = code; checkScan(code); }
        }

        // START
        renderScreen('welcome');
        setInterval(() => document.getElementById('clock').innerText = new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'}), 1000);

    </script>
</body>
</html>
